{"version":3,"sources":["../../src/util/selections.ts"],"names":["deepEqual","selectionCompatible","state","selectionMap","ignoreQuery","Object","keys","query","length","select","include","some","key","compare","value","selections","k","counts","has","get","fieldMap","relations","stateCompatible","newState","name","relationState","mergeState","mode","fields","add","createState","parent","Set","Map","mappings","mergeSelection","forEach","merge","count","set","selection","childMap","relatedState","selectionToQuery","nestedIncludes","hasSelection","sel","relation","nested","size","_count","field"],"mappings":"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"}