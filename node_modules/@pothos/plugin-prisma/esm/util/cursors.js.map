{"version":3,"sources":["../../src/util/cursors.ts"],"names":["decodeBase64","encodeBase64","getModel","DEFAULT_MAX_SIZE","DEFAULT_SIZE","formatCursorChunk","value","Date","String","Number","TypeError","formatCursor","fields","JSON","stringify","map","name","parseRawCursor","cursor","decoded","type","match","parseInt","parse","BigInt","Error","parseID","id","dataType","parseFloat","Buffer","from","getDefaultIDSerializer","modelName","fieldName","builder","model","field","find","f","parent","serializeID","primaryKey","join","n","kind","idx","index","uniqueIndexes","getDefaultIDParser","parts","Array","isArray","result","i","length","toString","parseCompositeCursor","parsed","record","forEach","prismaCursorConnectionQuery","args","ctx","maxSize","defaultSize","parseCursor","before","after","first","last","maxSizeForConnection","defaultSizeForConnection","take","Math","min","skip","wrapConnectionResult","results","totalCount","edges","gotFullResults","abs","hasNextPage","hasPreviousPage","nodes","slice","node","pageInfo","startCursor","endCursor","resolvePrismaCursorConnection","options","resolve","query","getCursorFormatter","modelData","uniqueIndex","getCursorParser","parser","rawCursor"],"mappings":"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"}