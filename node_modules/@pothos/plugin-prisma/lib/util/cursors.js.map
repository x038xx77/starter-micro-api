{"version":3,"sources":["../../src/util/cursors.ts"],"names":["formatCursorChunk","formatCursor","parseRawCursor","parseID","getDefaultIDSerializer","getDefaultIDParser","serializeID","parseCompositeCursor","prismaCursorConnectionQuery","wrapConnectionResult","resolvePrismaCursorConnection","getCursorFormatter","getCursorParser","DEFAULT_MAX_SIZE","DEFAULT_SIZE","value","Date","String","Number","TypeError","fields","encodeBase64","JSON","stringify","map","name","cursor","decoded","decodeBase64","type","match","parseInt","parse","BigInt","Error","id","dataType","parseFloat","Buffer","from","modelName","fieldName","builder","model","getModel","field","find","f","parent","primaryKey","join","n","kind","idx","index","uniqueIndexes","parts","Array","isArray","result","i","length","toString","parsed","record","forEach","args","ctx","maxSize","defaultSize","parseCursor","before","after","first","last","maxSizeForConnection","defaultSizeForConnection","take","Math","min","skip","results","totalCount","edges","gotFullResults","abs","hasNextPage","hasPreviousPage","nodes","slice","node","pageInfo","startCursor","endCursor","options","resolve","query","modelData","uniqueIndex","parser","rawCursor"],"mappings":"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"}