{"version":3,"sources":["../../src/util/map-query.ts"],"names":["queryFromInfo","selectionStateFromInfo","getIndirectType","addTypeSelectionsForField","type","context","info","state","selection","indirectPath","name","value","startsWith","pothosPrismaInclude","pothosPrismaSelect","pothosPrismaIndirectInclude","pothosPrismaModel","extensions","resolveIndirectInclude","path","resolvedType","field","isObjectType","mode","mergeSelection","select","undefined","include","selectionSet","addNestedSelections","includePath","resolve","rest","sel","selections","kind","Kind","FIELD","returnType","getNamedType","getFields","length","alias","FRAGMENT_SPREAD","fragments","typeCondition","schema","getType","INLINE_FRAGMENT","Error","addFieldSelection","fieldSelect","fieldSelectionMap","mappings","args","getArgumentValues","variableValues","rawQuery","indirectInclude","query","normalizedIndirectInclude","Array","isArray","normalizeInclude","fieldState","createStateForType","Object","keys","resolvedField","selectionToQuery","node","map","_","selectionCompatible","typeName","getTypeMap","fieldNodes","n","nested","setLoaderMappings","parentType","parent","targetType","fieldMap","pothosPrismaFieldMap","createState","currentType","normalized","fieldName","push"],"mappings":"AAAA,oCAAoC,GACpC,8BAA8B,GAC9B;;;;;;;;;;;IAiUgBA,aAAa,MAAbA;IAwCAC,sBAAsB,MAAtBA;IAkCAC,eAAe,MAAfA;;yBA9XT;2BAQ2B;4BAQ3B;AAEP,SAASC,0BACPC,IAAsB,EACtBC,OAAe,EACfC,IAAwB,EACxBC,KAAqB,EACrBC,SAAoB,EACpBC,YAAsB,EACtB;IACA,IAAID,UAAUE,IAAI,CAACC,KAAK,CAACC,UAAU,CAAC,OAAO;QACzC;IACF,CAAC;QAOIR;IALL,MAAM,EACJS,oBAAmB,EACnBC,mBAAkB,EAClBC,4BAA2B,EAC3BC,kBAAiB,EAClB,GAAIZ,CAAAA,cAAAA,KAAKa,UAAU,cAAfb,yBAAAA,cAAmB,CAAC,CAAC;IAO1B,IAAIW,6BAA6B;QAC/BG,uBACEd,MACAE,MACAE,WACAO,4BAA4BI,IAAI,EAChCV,cACA,CAACW,cAAcC,OAAOF,OAAS;YAC7BhB,0BAA0BiB,cAAcf,SAASC,MAAMC,OAAOc,OAAOF;QACvE;IAEJ,CAAC;IAED,IAAI,CAACG,IAAAA,qBAAY,EAAClB,OAAO;QACvB;IACF,CAAC;IAED,IAAIY,qBAAqB,CAACF,oBAAoB;QAC5CP,MAAMgB,IAAI,GAAG;IACf,CAAC;IAED,IAAIV,uBAAuBC,oBAAoB;QAC7CU,IAAAA,0BAAc,EAACjB,OAAO;YACpBkB,QAAQX,qBAAqB;gBAAE,GAAGA,kBAAkB;YAAC,IAAIY,SAAS;YAClEC,SAASd,sBAAsB;gBAAE,GAAGA,mBAAmB;YAAC,IAAIa,SAAS;QACvE;IACF,CAAC;IAED,IAAIlB,UAAUoB,YAAY,EAAE;QAC1BC,oBAAoBzB,MAAMC,SAASC,MAAMC,OAAOC,UAAUoB,YAAY,EAAEnB;IAC1E,CAAC;AACH;AAEA,SAASS,uBACPd,IAAsB,EACtBE,IAAwB,EACxBE,SAAkE,EAClEsB,WAAoC,EACpCX,IAAc,EACdY,OAA2E,EAC3E;IACA,MAAM,CAACJ,SAAS,GAAGK,KAAK,GAAGF;IAC3B,IAAI,CAACtB,UAAUoB,YAAY,IAAI,CAACD,SAAS;QACvC;IACF,CAAC;IAED,KAAK,MAAMM,OAAOzB,UAAUoB,YAAY,CAACM,UAAU,CAAE;QACnD,OAAQD,IAAIE,IAAI;YACd,KAAKC,aAAI,CAACC,KAAK;gBACb,IAAIJ,IAAIvB,IAAI,CAACC,KAAK,KAAKgB,QAAQjB,IAAI,IAAIY,IAAAA,qBAAY,EAAClB,OAAO;oBACzD,MAAMkC,aAAaC,IAAAA,qBAAY,EAACnC,KAAKoC,SAAS,EAAE,CAACP,IAAIvB,IAAI,CAACC,KAAK,CAAC,CAACP,IAAI;oBAErE,IAAI4B,KAAKS,MAAM,KAAK,GAAG;4BACcR;4BAAAA;wBAAnCF,QAAQO,YAAYL,KAAK;+BAAId;4BAAMc,CAAAA,OAAAA,CAAAA,MAAAA,IAAIS,KAAK,cAATT,iBAAAA,KAAAA,IAAAA,IAAWtB,KAAK,cAAhBsB,kBAAAA,OAAoBA,IAAIvB,IAAI,CAACC,KAAK;yBAAC;oBACxE,OAAO;4BAMOsB;4BAAAA;wBALZf,uBACEoB,YACAhC,MACA2B,KACAD,MACA;+BAAIb;4BAAMc,CAAAA,OAAAA,CAAAA,OAAAA,IAAIS,KAAK,cAATT,kBAAAA,KAAAA,IAAAA,KAAWtB,KAAK,cAAhBsB,kBAAAA,OAAoBA,IAAIvB,IAAI,CAACC,KAAK;yBAAC,EAC7CoB;oBAEJ,CAAC;gBACH,CAAC;gBACD,QAAS;YACX,KAAKK,aAAI,CAACO,eAAe;gBACvB,IAAIrC,KAAKsC,SAAS,CAACX,IAAIvB,IAAI,CAACC,KAAK,CAAC,CAACkC,aAAa,CAACnC,IAAI,CAACC,KAAK,KAAKgB,QAAQvB,IAAI,EAAE;oBAC5Ec,uBACEZ,KAAKwC,MAAM,CAACC,OAAO,CAACpB,QAAQvB,IAAI,GAChCE,MACAA,KAAKsC,SAAS,CAACX,IAAIvB,IAAI,CAACC,KAAK,CAAC,EAC9BmB,aACAX,MACAY;gBAEJ,CAAC;gBAED,QAAS;YAEX,KAAKK,aAAI,CAACY,eAAe;gBACvB,IAAI,CAACf,IAAIY,aAAa,IAAIZ,IAAIY,aAAa,CAACnC,IAAI,CAACC,KAAK,KAAKgB,QAAQvB,IAAI,EAAE;oBACvEc,uBACEe,IAAIY,aAAa,GAAGvC,KAAKwC,MAAM,CAACC,OAAO,CAACd,IAAIY,aAAa,CAACnC,IAAI,CAACC,KAAK,IAAKP,IAAI,EAC7EE,MACA2B,KACAH,aACAX,MACAY;gBAEJ,CAAC;gBAED,QAAS;YAEX;gBACE,MAAM,IAAIkB,MAAM,CAAC,2BAA2B,EAAE,AAACzC,UAA+B2B,IAAI,CAAC,CAAC,EAAE;QAC1F;IACF;AACF;AAEA,SAASN,oBACPzB,IAAuB,EACvBC,OAAe,EACfC,IAAwB,EACxBC,KAAqB,EACrB2B,UAA4B,EAC5BzB,YAAsB,EACtB;IACA,KAAK,MAAMD,aAAa0B,WAAWA,UAAU,CAAE;QAC7C,OAAQ1B,UAAU2B,IAAI;YACpB,KAAKC,aAAI,CAACC,KAAK;gBACba,kBAAkB9C,MAAMC,SAASC,MAAMC,OAAOC,WAAWC;gBAEzD,QAAS;YACX,KAAK2B,aAAI,CAACO,eAAe;gBACvB,IAAIrC,KAAKsC,SAAS,CAACpC,UAAUE,IAAI,CAACC,KAAK,CAAC,CAACkC,aAAa,CAACnC,IAAI,CAACC,KAAK,KAAKP,KAAKM,IAAI,EAAE;oBAC/E,QAAS;gBACX,CAAC;gBAEDmB,oBACEzB,MACAC,SACAC,MACAC,OACAD,KAAKsC,SAAS,CAACpC,UAAUE,IAAI,CAACC,KAAK,CAAC,CAACiB,YAAY,EACjDnB;gBAGF,QAAS;YAEX,KAAK2B,aAAI,CAACY,eAAe;gBACvB,IAAIxC,UAAUqC,aAAa,IAAIrC,UAAUqC,aAAa,CAACnC,IAAI,CAACC,KAAK,KAAKP,KAAKM,IAAI,EAAE;oBAC/E,QAAS;gBACX,CAAC;gBAEDmB,oBAAoBzB,MAAMC,SAASC,MAAMC,OAAOC,UAAUoB,YAAY,EAAEnB;gBAExE,QAAS;YAEX;gBACE,MAAM,IAAIwC,MAAM,CAAC,2BAA2B,EAAE,AAACzC,UAA+B2B,IAAI,CAAC,CAAC,EAAE;QAC1F;IACF;AACF;AAEA,SAASe,kBACP9C,IAAuB,EACvBC,OAAe,EACfC,IAAwB,EACxBC,KAAqB,EACrBC,SAAoB,EACpBC,YAAsB,EACtB;QAWoBY;IAVpB,IAAIb,UAAUE,IAAI,CAACC,KAAK,CAACC,UAAU,CAAC,OAAO;QACzC;IACF,CAAC;IAED,MAAMS,QAAQjB,KAAKoC,SAAS,EAAE,CAAChC,UAAUE,IAAI,CAACC,KAAK,CAAC;IAEpD,IAAI,CAACU,OAAO;QACV,MAAM,IAAI4B,MAAM,CAAC,cAAc,EAAEzC,UAAUE,IAAI,CAACC,KAAK,CAAC,IAAI,EAAEP,KAAKM,IAAI,CAAC,CAAC,EAAE;IAC3E,CAAC;IAED,MAAMyC,cAAc9B,CAAAA,MAAAA,MAAMJ,UAAU,cAAhBI,iBAAAA,KAAAA,IAAAA,IAAkBP,kBAAkB;IAExD,IAAIsC;IAEJ,IAAIC,WAA2B,CAAC;IAEhC,IAAI,OAAOF,gBAAgB,YAAY;QACrC,MAAMG,OAAOC,IAAAA,0BAAiB,EAAClC,OAAOb,WAAWF,KAAKkD,cAAc;QAKpEJ,oBAAoBD,YAClBG,MACAjD,SACA,CAACoD,UAAUC,kBAAoB;YAC7B,MAAMpB,aAAaC,IAAAA,qBAAY,EAAClB,MAAMjB,IAAI;YAC1C,MAAMuD,QAAQ,OAAOF,aAAa,aAAaA,SAASH,MAAMjD,WAAWoD,QAAQ;YAEjF,MAAMG,4BAA4BC,MAAMC,OAAO,CAACJ,mBAC5CK,iBAAiBL,iBAAiBxD,gBAAgBoC,YAAYhC,SAC9DoD,eAAe;YAEnB,MAAMM,aAAaC,mBACjB/D,gBACE0D,4BACItD,KAAKwC,MAAM,CAACC,OAAO,CAACa,0BAA0Bb,OAAO,MACrDT,UAAU,EACdhC,OAEFA,MACAC;YAGF,IAAI,OAAOoD,UAAU,YAAYO,OAAOC,IAAI,CAACR,OAAOlB,MAAM,GAAG,GAAG;gBAC9DjB,IAAAA,0BAAc,EAACwC,YAAY;oBAAEvC,QAAQ,CAAC;oBAAG,GAAGkC,KAAK;gBAAC;YACpD,CAAC;YAED,IAAIC,6BAA6BA,0BAA0BzC,IAAI,CAACsB,MAAM,GAAG,GAAG;oBAMjEH,KAAD;oBAAA;gBALRpB,uBACEoB,YACAhC,MACAE,WACA;uBACM,CAAA,OAAA,CAAA,OAAC8B,CAAAA,MAAAA,WAAWrB,UAAU,cAArBqB,iBAAAA,KAAAA,IAAAA,IAAuBvB,2BAA2B,cAAnD,kBAAA,KAAA,IAAA,KAAsEI,IAAI,cAA1E,kBAAA,OAA8E,EAAE;uBACjFyC,0BAA0BzC,IAAI;iBAClC,EACD,EAAE,EACF,CAACC,cAAcgD,eAAejD,OAAS;oBACrChB,0BACEiB,cACAf,SACAC,MACA0D,YACAI,eACAjD;gBAEJ;YAEJ,CAAC;YAEDhB,0BAA0BmC,YAAYjC,SAASC,MAAM0D,YAAYxD,WAAW,EAAE;YAE9E,gDAAgD;YAChD6C,WAAWW,WAAWX,QAAQ;YAE9B,OAAOgB,IAAAA,4BAAgB,EAACL;QAC1B,GACA,CAAC7C,OAAS;YACR,MAAMmB,aAAaC,IAAAA,qBAAY,EAAClB,MAAMjB,IAAI;YAC1C,IAAIkE,OAAyB,IAAI;YAEjCpD,uBACEoB,YACAhC,MACAE,WACAW,KAAKoD,GAAG,CAAC,CAAC7D,OAAU,CAAA;oBAClBA;gBACF,CAAA,IACA,EAAE,EACF,CAAC8D,GAAGJ,gBAAkB;gBACpBE,OAAOF;YACT;YAGF,OAAOE;QACT;IAEJ,OAAO;QACLlB,oBAAoB;YAAE3B,QAAQ0B;QAAY;IAC5C,CAAC;IAED,IAAIA,eAAesB,IAAAA,+BAAmB,EAAClE,OAAO6C,mBAAmB,IAAI,GAAG;YAEvD5C;QADfgB,IAAAA,0BAAc,EAACjB,OAAO6C;YACP5C;QAAfD,MAAM8C,QAAQ,CAAC7C,CAAAA,OAAAA,CAAAA,OAAAA,UAAUkC,KAAK,cAAflC,kBAAAA,KAAAA,IAAAA,KAAiBG,KAAK,cAAtBH,kBAAAA,OAA0BA,UAAUE,IAAI,CAACC,KAAK,CAAC,GAAG;YAC/DU,OAAOb,UAAUE,IAAI,CAACC,KAAK;YAC3BP,MAAMA,KAAKM,IAAI;YACf2C;YACA5C;QACF;IACF,CAAC;AACH;AAEO,SAAST,cAAwE,EACtFK,QAAO,EACPC,KAAI,EACJoE,SAAQ,EACRjD,OAAM,EACNN,MAAO,EAAE,CAAA,EAOV,EAAoC;IACnC,MAAMf,OAAOsE,WAAWpE,KAAKwC,MAAM,CAAC6B,UAAU,EAAE,CAACD,SAAS,GAAGnC,IAAAA,qBAAY,EAACjC,KAAKgC,UAAU,CAAC;IAC1F,MAAM/B,QAAQ0D,mBAAmB7D,MAAME;IAEvC,IAAImB,QAAQ;QACVD,IAAAA,0BAAc,EAACjB,OAAO;YAAEkB;QAAO;IACjC,CAAC;IAED,IAAIN,KAAKsB,MAAM,GAAG,GAAG;QACnBvB,uBACEqB,IAAAA,qBAAY,EAACjC,KAAKgC,UAAU,GAC5BhC,MACAA,KAAKsE,UAAU,CAAC,EAAE,EAClBzD,KAAKoD,GAAG,CAAC,CAACM,IAAO,OAAOA,MAAM,WAAW;gBAAEnE,MAAMmE;YAAE,IAAIA,CAAC,GACxD,EAAE,EACF,CAACzD,cAAcgD,eAAeU,SAAW;YACvC3E,0BAA0BiB,cAAcf,SAASC,MAAMC,OAAO6D,eAAeU;QAC/E;IAEJ,OAAO;QACL3E,0BAA0BC,MAAMC,SAASC,MAAMC,OAAOD,KAAKsE,UAAU,CAAC,EAAE,EAAE,EAAE;IAC9E,CAAC;IAEDG,IAAAA,4BAAiB,EAAC1E,SAASC,MAAMC,MAAM8C,QAAQ;IAE/C,OAAOgB,IAAAA,4BAAgB,EAAC9D;AAC1B;AAEO,SAASN,uBACdI,OAAe,EACfC,IAAwB,EACxBoE,QAAiB,EACjB;IACA,MAAMtE,OAAOsE,WAAWpE,KAAKwC,MAAM,CAAC6B,UAAU,EAAE,CAACD,SAAS,GAAGpE,KAAK0E,UAAU;IAE5E,MAAMzE,QAAQ0D,mBAAmB7D,MAAME;IAEvC,IAAI,CAACgB,IAAAA,qBAAY,EAAClB,OAAO;QACvB,MAAM,IAAI6C,MAAM,4DAA4D;IAC9E,CAAC;IAEDC,kBAAkB9C,MAAMC,SAASC,MAAMC,OAAOD,KAAKsE,UAAU,CAAC,EAAE,EAAE,EAAE;IAEpE,OAAOrE;AACT;AAEA,SAAS0D,mBACP7D,IAAsB,EACtBE,IAAwB,EACxB2E,MAAuB,EACvB;QAGiBC,KAIfA;IANF,MAAMA,aAAahF,gBAAgBE,MAAME;IAEzC,MAAM6E,WAAWD,CAAAA,MAAAA,WAAWjE,UAAU,cAArBiE,iBAAAA,KAAAA,IAAAA,IAAuBE,oBAAoB;IAE5D,OAAOC,IAAAA,uBAAW,EAChBF,UACAD,CAAAA,CAAAA,OAAAA,WAAWjE,UAAU,cAArBiE,kBAAAA,KAAAA,IAAAA,KAAuBpE,kBAAkB,AAAD,IAAI,WAAW,SAAS,EAChEmE;AAEJ;AAEO,SAAS/E,gBAAgBE,IAAsB,EAAEE,IAAwB,EAAE;QAGzE4E;IAFP,IAAIA,aAAa9E;IAEjB,MAAO8E,CAAAA,MAAAA,WAAWjE,UAAU,cAArBiE,iBAAAA,KAAAA,IAAAA,IAAuBnE,2BAA2B,CAAE;YAEtDmE;QADHA,aAAa5E,KAAKwC,MAAM,CAACC,OAAO,CAC9B,CAACmC,CAAAA,OAAAA,WAAWjE,UAAU,cAArBiE,kBAAAA,KAAAA,IAAAA,KAAuBnE,2BAA2B,AAAmB,EAAEgC,OAAO;IAEnF;IAEA,OAAOmC;AACT;AAEA,SAASnB,iBAAiB5C,IAAc,EAAEf,IAAsB,EAAE;IAChE,IAAIkF,cAAclF;IAElB,MAAMmF,aAA+C,EAAE;IAEvD,IAAI,CAACjE,IAAAA,qBAAY,EAACgE,cAAc;QAC9B,MAAM,IAAIrC,MAAM,CAAC,SAAS,EAAEqC,YAAY,qBAAqB,CAAC,EAAE;IAClE,CAAC;IAED,KAAK,MAAME,aAAarE,KAAM;QAC5B,MAAME,QAAwCiE,YAAY9C,SAAS,EAAE,CAACgD,UAAU;QAEhF,IAAI,CAACnE,OAAO;YACV,MAAM,IAAI4B,MAAM,CAAC,SAAS,EAAEqC,YAAY,iBAAiB,EAAEE,UAAU,CAAC,EAAE;QAC1E,CAAC;QAEDF,cAAc/C,IAAAA,qBAAY,EAAClB,MAAMjB,IAAI;QAErC,IAAI,CAACkB,IAAAA,qBAAY,EAACgE,cAAc;YAC9B,MAAM,IAAIrC,MAAM,CAAC,SAAS,EAAEqC,YAAY,qBAAqB,CAAC,EAAE;QAClE,CAAC;QAEDC,WAAWE,IAAI,CAAC;YAAE/E,MAAM8E;YAAWpF,MAAMkF,YAAY5E,IAAI;QAAC;IAC5D;IAEA,OAAO;QACLqC,SAAS,IAAOwC,WAAW9C,MAAM,GAAG,IAAI8C,UAAU,CAACA,WAAW9C,MAAM,GAAG,EAAE,CAACrC,IAAI,GAAGA,KAAKM,IAAI;QAC1FS,MAAMoE;IACR;AACF"}