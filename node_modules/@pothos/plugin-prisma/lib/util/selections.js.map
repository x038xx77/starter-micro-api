{"version":3,"sources":["../../src/util/selections.ts"],"names":["selectionCompatible","stateCompatible","mergeState","createState","mergeSelection","selectionToQuery","state","selectionMap","ignoreQuery","Object","keys","query","length","select","include","some","key","compare","deepEqual","value","selections","k","counts","has","get","fieldMap","relations","newState","name","relationState","mode","fields","add","parent","Set","Map","mappings","forEach","merge","count","set","selection","childMap","relatedState","nestedIncludes","hasSelection","sel","relation","nested","size","_count","field"],"mappings":"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"}